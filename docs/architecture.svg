<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="700" viewBox="0 0 1200 700">
  <style>
    .box { fill:#ffffff; stroke:#333; stroke-width:1.5px; rx:8; ry:8; }
    .ext { fill:#fff0f8; }
    .title { font: 700 14px/1.2 Arial, Helvetica, sans-serif; fill:#111; }
    .label { font: 12px/1.2 Arial, Helvetica, sans-serif; fill:#111; }
    .small { font: 11px/1.2 Arial, Helvetica, sans-serif; fill:#444; }
    .arrow { stroke:#333; stroke-width:1.5; fill:none; marker-end:url(#arrowhead); }
  </style>

  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333" />
    </marker>
  </defs>

  <!-- Developer -->
  <rect x="40" y="40" width="160" height="60" class="box" />
  <text x="120" y="70" text-anchor="middle" class="title">Developer / Operator</text>
  <text x="120" y="88" text-anchor="middle" class="small">run demo / hit endpoint</text>

  <!-- Demo App -->
  <rect x="260" y="20" width="300" height="120" class="box" />
  <text x="410" y="50" text-anchor="middle" class="title">Demo App</text>
  <text x="410" y="70" text-anchor="middle" class="small">Node.js / TypeScript</text>

  <!-- Demo App internals blocks -->
  <rect x="600" y="20" width="160" height="60" class="box" />
  <text x="680" y="45" text-anchor="middle" class="label">Config (.env)</text>

  <rect x="600" y="100" width="160" height="60" class="box" />
  <text x="680" y="125" text-anchor="middle" class="label">Alloy API Client</text>
  <text x="680" y="142" text-anchor="middle" class="small">(api/client.ts)</text>

  <rect x="260" y="160" width="300" height="70" class="box" />
  <text x="410" y="190" text-anchor="middle" class="label">HTTP Server (Express)</text>
  <text x="410" y="207" text-anchor="middle" class="small">server.ts, /run-demo, /webhooks</text>

  <rect x="260" y="250" width="140" height="60" class="box" />
  <text x="330" y="280" text-anchor="middle" class="label">Examples / CLI</text>
  <text x="330" y="297" text-anchor="middle" class="small">src/examples</text>

  <rect x="420" y="250" width="140" height="60" class="box" />
  <text x="490" y="280" text-anchor="middle" class="label">Utilities</text>
  <text x="490" y="297" text-anchor="middle" class="small">logger, retry, errors</text>

  <!-- External Alloy API -->
  <rect x="920" y="40" width="220" height="90" class="box ext" />
  <text x="1030" y="70" text-anchor="middle" class="title">Alloy External API</text>
  <text x="1030" y="90" text-anchor="middle" class="small">Sandbox / Production</text>

  <!-- Webhook handler box -->
  <rect x="920" y="160" width="220" height="70" class="box" />
  <text x="1030" y="193" text-anchor="middle" class="label">Webhook Handler</text>
  <text x="1030" y="210" text-anchor="middle" class="small">verify signature, process events</text>

  <!-- DB and Queue -->
  <rect x="920" y="260" width="220" height="60" class="box" />
  <text x="1030" y="290" text-anchor="middle" class="label">Optional Database</text>
  <text x="1030" y="306" text-anchor="middle" class="small">Postgres / DynamoDB</text>

  <rect x="920" y="340" width="220" height="60" class="box" />
  <text x="1030" y="370" text-anchor="middle" class="label">Optional Queue</text>
  <text x="1030" y="386" text-anchor="middle" class="small">SQS / RabbitMQ</text>

  <rect x="260" y="340" width="300" height="60" class="box" />
  <text x="410" y="370" text-anchor="middle" class="label">Observability</text>
  <text x="410" y="386" text-anchor="middle" class="small">Logs / Metrics</text>

  <!-- Arrows -->
  <path class="arrow" d="M200 70 L260 70" />
  <path class="arrow" d="M560 70 L600 50" />
  <path class="arrow" d="M560 70 L600 120" />
  <path class="arrow" d="M460 140 L600 130" />
  <path class="arrow" d="M760 120 L920 90" />
  <path class="arrow" d="M760 130 L920 200" />

  <!-- API Client to Alloy -->
  <path class="arrow" d="M760 130 L920 85" />
  <text x="840" y="110" text-anchor="middle" class="small">HTTPS (REST/JSON) - API_KEY / Bearer</text>

  <!-- Alloy to Webhook -->
  <path class="arrow" d="M1030 130 L1030 160" stroke-dasharray="4 3" />
  <text x="1060" y="150" class="small">webhook (async events)</text>

  <!-- Webhook to Server -->
  <path class="arrow" d="M920 200 L560 200" />

  <!-- Server to DB and Queue -->
  <path class="arrow" d="M560 300 L920 290" />
  <path class="arrow" d="M560 330 L920 370" />

  <!-- DemoApp to Observability -->
  <path class="arrow" d="M410 310 L410 340" />

  <!-- Class for external -->
</svg>